"use strict";var nuriTheme;jQuery(document).ready(function(p){p("#nav-toggle").on("click",function(){p("body").hasClass("active-nav")?(p("body").removeClass("active-nav"),p("#nav-toggle").removeClass("active")):p("body").hasClass("active-search")?(p("#search-overlay").fadeToggle(),p("body").removeClass("active-search"),p("#nav-toggle").removeClass("active")):(p("body").addClass("active-nav"),p("#nav-toggle").addClass("active"))}),p("#mobile-filter").on("click",function(){p("body").toggleClass("active-filter"),p("#mobile-filter-icon").toggleClass("active-mobile-filter"),p("#mobile-filter + ul").slideToggle()});var e=p("header"),t=p(window);if(p(".wrapper > article > div").first().hasClass("wp-block-cover")){var o=p(".wrapper > article > div").first();o.addClass("cover-on-top").css({height:window.innerHeight}),o.find(".wp-block-cover__inner-container").append('<div class="scrollToBottom bounce"><a href="#"><i class="scroll-icon"></i></a></div>'),p(".wp-block-cover").on("click",".scrollToBottom",function(){var e=481<p(window).outerWidth()?p(".header-inner").outerHeight():0,t=o.next().offset().top-e;p("html,body").animate({scrollTop:t},1e3,"swing")}),e.addClass("dynamic-header"),t.scroll(function(){t.scrollTop()>=t.height()?e.addClass("fixed-header"):e.removeClass("fixed-header")})}if(p(".single-product-info").on("click",".single-product-info-title",function(){p(this).next().slideToggle()}),p(".woo-back").length){var l=p(".woo-back").detach();p(".woocommerce-product-gallery").prepend(l),p(".woo-back").css("opacity",1),p(".woo-back-link").hover(function(){p(".woo-back-name").fadeToggle()})}var h=[],r=[],i="*";if(p("body:not(.search) .woo-custom-filter").length){var c=function(){r=[],n="",p("input[type=checkbox]").prop("checked",!1),f.isotope({filter:i}),p(".filter-current-parent .filter-child-cat").slideUp(),p(".filter-current-parent").removeClass("filter-current-parent")},a=0;if(t.scroll(function(e){var t=p(this).scrollTop();a<t?480<p(window).width()&&p(".filter-current-parent .filter-child-cat").slideUp().addClass("sub-visible").removeClass("sub-hidden"):480<p(window).width()&&p(".filter-current-parent .filter-child-cat").slideDown().addClass("sub-hidden").removeClass("sub-visible"),a=t}),p(document).on("mouseenter",".woo-custom-filter",function(e){p(".filter-current-parent .filter-child-cat").slideDown()}).on("mouseleave",".woo-custom-filter",function(){p(".filter-current-parent .filter-child-cat.sub-visible").slideUp()}),p(".woo-custom-filter").data("query-cat-id")){var s=p(".woo-custom-filter").data("query-cat-id");r.push(s),i=".product_cat-"+s,console.log("category page")}p(".filter-current-parent .filter-child-cat").slideToggle();var n,f=p(".products");f.children().each(function(){var e=p(this).attr("class").split("post-")[1].match(/\d+/)[0];h.push(e)}),p(".filter-parent-cat").on("click","span",function(e){p("html, body").animate({scrollTop:0},"slow"),c();var t=p(this).parent();"block"==t.find(".filter-child-cat").css("display")?p(".filter-current-parent .filter-child-cat").slideToggle().parent().removeClass("filter-current-parent"):("block"==p(".filter-child-cat").css("display")&&(p(".filter-current-parent .filter-child-cat").slideToggle(),p(".filter-current-parent").removeClass("filter-current-parent")),t.addClass("filter-current-parent").find(".filter-child-cat").slideToggle())}),p(".woo-custom-filter").on("click",".clear-filter",function(e){c(),console.log("clicked on form reset link"),console.log("jsonFlag: "+v);var t=f.isotope("getFilteredItemElements").length;t%4==0?m():m(4-t%4)}),p(".filter-child-cat li input.checked").length&&p(".filter-child-cat li input.checked").trigger("click"),f.isotope({itemSelector:".product",layoutMode:"fitRows",filter:i}),p(".woo-custom-filter").on("click",".product-parent-selector",function(){var e=p(this).attr("data-filter");n=e.substring(13),r.push(n),f.isotope({filter:e});var t=f.isotope("getFilteredItemElements").length;t%4==0?m():m(4-t%4)});var d=p(".filter-child-cat input");d.change(function(){var o=[];if(r=[],d.filter(":checked").each(function(){p("html, body").animate({scrollTop:0},"slow");var e=p(this).attr("data-filter");o.push(e),r.push(e.substring(13));var t=f.isotope("getFilteredItemElements").length;t%4==0?m():m(4-t%4)}),0==r.length){var e=".product_cat-"+n;o.push(e),r.push(n);var t=f.isotope("getFilteredItemElements").length;t%4==0?m():m(4-t%4)}o=o.join(", "),console.log("filters: "+o),f.isotope({filter:o})}),p(window).on("resize scroll",function(){var e,t,o,l,i;t=p(e=".load-more-wrapper").offset().top,o=t+p(e).outerHeight(),l=p(window).scrollTop(),i=l+p(window).height(),l<o&&t<i&&v&&m()}),setTimeout(function(){m()},100)}var u="https://nurifood.ch/wp-json/wc/v3/products";var g="Basic "+restkeys.auth,v=!0;p(".woo-custom-filter").data("postcount")&&p(".woo-custom-filter").data("postcount");function m(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:4,o=t;if(console.log("jsonFlag:"+v),v){var l=r.join(","),i=h.join(",");console.log(u+"?per_page="+t+"&category="+l+"&exclude="+i+"&status=publish"),e=u+"?per_page="+t+"&category="+l+"&exclude="+i+"&status=publish",jQuery.ajax({url:e,method:"GET",beforeSend:function(e){e.setRequestHeader("Authorization",g),v=!1},success:function(d){var u=0;console.log("data length: "+d.length),d.length<=3?(p(".lds-ellipsis").fadeOut(),v=!0):p(".lds-ellipsis").fadeIn(),jQuery.each(d,function(e,t){if(u<=3){var o=d[e].id,l=d[e].name,i=d[e].permalink,r=d[e].price_html,c=d[e].categories,a="";c.forEach(function(e,t,o){a=a+"product_cat-"+e.id+" "});var s=d[e].images[0]?d[e].images[0].shop_catalog:"https://nurifood.ch/wprs/wp-content/uploads/custom-woo-placeholder.gif",n=p('<li class="product type-product post-'+o+" status-publish "+a+'has-post-thumbnail shipping-taxable purchasable product-type-simple"><a href="'+i+'" class="woocommerce-LoopProduct-link woocommerce-loop-product__link"><img width="315" height="315" src="'+s+'" class="attachment-woocommerce_thumbnail size-woocommerce_thumbnail" alt loading="lazy" /><h2 class="woocommerce-loop-product__title">'+l+'</h2><span class="price">'+r+"</span></a></li>");f.isotope("insert",n),h.push(o),u++}})},error:function(e,t,o){console.log("ERROR : ",o),console.log("ERROR : ",$xhr),console.log("ERROR : ",t)}}).done(function(e){e.length&&(v=!0),console.log("done request")})}else console.log("wait. loading from rest"),setTimeout(function(){m(o)},200)}p("#search-icon").on("click",function(){p("body").toggleClass("active-search"),p("#search-overlay").fadeToggle(),p(".aws-search-field").focus(),p("#nav-toggle").toggleClass("active")}),p("#search-overlay").on("click",function(e){e.target==this&&(p("body").toggleClass("active-search"),p("#search-overlay").fadeToggle(),p("#nav-toggle").toggleClass("active"))}),p(document).keyup(function(e){27===e.keyCode&&p("#search-overlay").fadeOut(),p("body").toggleClass("active-search"),p("#nav-toggle").toggleClass("active")}),p(".search-results .woo-custom-filter, .search-results .load-more-wrapper").remove(),p(".woocommerce .wrapper select").length&&p("select").selectWoo()});