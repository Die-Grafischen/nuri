"use strict";var nuriTheme;jQuery(document).ready(function(d){d("#nav-toggle").on("click",function(){d("body").hasClass("active-nav")?(d("body").removeClass("active-nav"),d("#nav-toggle").removeClass("active")):d("body").hasClass("active-search")?(d("#search-overlay").fadeToggle(),d("body").removeClass("active-search"),d("#nav-toggle").removeClass("active")):(d("body").addClass("active-nav"),d("#nav-toggle").addClass("active"))}),d("#mobile-filter").on("click",function(){d("body").toggleClass("active-filter"),d("#mobile-filter-icon").toggleClass("active-mobile-filter"),d("#mobile-filter + ul").slideToggle()});var t,e=d("header"),o=d(window);d(".wrapper > article > div").first().hasClass("wp-block-cover")&&((t=d(".wrapper > article > div").first()).addClass("cover-on-top").css({height:window.innerHeight}),t.find(".wp-block-cover__inner-container").append('<div class="scrollToBottom bounce"><a href="#"><i class="scroll-icon"></i></a></div>'),d(".wp-block-cover").on("click",".scrollToBottom",function(){var e=481<d(window).outerWidth()?d(".header-inner").outerHeight():0,e=t.next().offset().top-e;d("html,body").animate({scrollTop:e},1e3,"swing")}),e.addClass("dynamic-header"),o.scroll(function(){o.scrollTop()>=o.height()?e.addClass("fixed-header"):e.removeClass("fixed-header")})),d(".single-product-info").on("click",".single-product-info-title",function(){d(this).next().slideToggle()}),d(".woo-back").length&&(i=d(".woo-back").detach(),d(".woocommerce-product-gallery").prepend(i),d(".woo-back").css("opacity",1),d(".woo-back-link").hover(function(){d(".woo-back-name").fadeToggle()}));var l,c,i,u,r,s,p=[],a=[],n="*";d("body:not(.search) .woo-custom-filter").length&&(l=function(){a=[],r="",d("input[type=checkbox]").prop("checked",!1),u.isotope({filter:n}),d(".filter-current-parent .filter-child-cat").slideUp(),d(".filter-current-parent").removeClass("filter-current-parent")},c=0,o.scroll(function(e){var t=d(this).scrollTop();c<t?480<d(window).width()&&d(".filter-current-parent .filter-child-cat").slideUp().addClass("sub-visible").removeClass("sub-hidden"):480<d(window).width()&&d(".filter-current-parent .filter-child-cat").slideDown().addClass("sub-hidden").removeClass("sub-visible"),c=t}),d(document).on("mouseenter",".woo-custom-filter",function(e){d(".filter-current-parent .filter-child-cat").slideDown()}).on("mouseleave",".woo-custom-filter",function(){d(".filter-current-parent .filter-child-cat.sub-visible").slideUp()}),d(".woo-custom-filter").data("query-cat-id")&&(i=d(".woo-custom-filter").data("query-cat-id"),a.push(i),n=".product_cat-"+i,console.log("category page")),d(".filter-current-parent .filter-child-cat").slideToggle(),(u=d(".products")).children().each(function(){var e=d(this).attr("class").split("post-")[1].match(/\d+/)[0];p.push(e)}),d(".filter-parent-cat").on("click","span",function(e){d("html, body").animate({scrollTop:0},"slow"),l();var t=d(this).parent();"block"==t.find(".filter-child-cat").css("display")?d(".filter-current-parent .filter-child-cat").slideToggle().parent().removeClass("filter-current-parent"):("block"==d(".filter-child-cat").css("display")&&(d(".filter-current-parent .filter-child-cat").slideToggle(),d(".filter-current-parent").removeClass("filter-current-parent")),t.addClass("filter-current-parent").find(".filter-child-cat").slideToggle())}),d(".woo-custom-filter").on("click",".clear-filter",function(e){l(),console.log("clicked on form reset link"),console.log("jsonFlag: "+g);var t=u.isotope("getFilteredItemElements").length;t%4==0?m():m(4-t%4)}),d(".filter-child-cat li input.checked").length&&d(".filter-child-cat li input.checked").trigger("click"),u.isotope({itemSelector:".product",layoutMode:"fitRows",filter:n}),d(".woo-custom-filter").on("click",".product-parent-selector",function(){var e=d(this).attr("data-filter");r=e.substring(13),a.push(r),u.isotope({filter:e});e=u.isotope("getFilteredItemElements").length;e%4==0?m():m(4-e%4)}),(s=d(".filter-child-cat input")).change(function(){var e,t=[];a=[],s.filter(":checked").each(function(){d("html, body").animate({scrollTop:0},"slow");var e=d(this).attr("data-filter");t.push(e),a.push(e.substring(13));e=u.isotope("getFilteredItemElements").length;e%4==0?m():m(4-e%4)}),0==a.length&&(e=".product_cat-"+r,t.push(e),a.push(r),(e=u.isotope("getFilteredItemElements").length)%4==0?m():m(4-e%4)),t=t.join(", "),console.log("filters: "+t),u.isotope({filter:t})}),d(window).on("resize scroll",function(){var e,t,o,l;t=d(e=".load-more-wrapper").offset().top,o=t+d(e).outerHeight(),l=d(window).scrollTop(),e=l+d(window).height(),l<o&&t<e&&g&&m()}),setTimeout(function(){m()},100));var h="https://nurifood.ch/wp-json/wc/v3/products";var f="Basic "+restkeys.auth,g=!0;d(".woo-custom-filter").data("postcount")&&d(".woo-custom-filter").data("postcount");function m(e){var t,o=0<arguments.length&&void 0!==e?e:4,l=o;console.log("jsonFlag:"+g),g?(t=a.join(","),e=p.join(","),console.log(h+"?per_page="+o+"&category="+t+"&exclude="+e+"&status=publish"),e=h+"?per_page="+o+"&category="+t+"&exclude="+e+"&status=publish",jQuery.ajax({url:e,method:"GET",beforeSend:function(e){e.setRequestHeader("Authorization",f),g=!1},success:function(a){var n=0;console.log("data length: "+a.length),a.length<=3?(d(".lds-ellipsis").fadeOut(),g=!0):d(".lds-ellipsis").fadeIn(),jQuery.each(a,function(e,t){var o,l,c,i,r,s;n<=3&&(o=a[e].id,l=a[e].name,c=a[e].permalink,s=a[e].price_html,i=a[e].categories,r="",i.forEach(function(e,t,o){r=r+"product_cat-"+e.id+" "}),e=a[e].images[0]?a[e].images[0].shop_catalog:"https://nurifood.ch/wprs/wp-content/uploads/custom-woo-placeholder.gif",s=d('<li class="product type-product post-'+o+" status-publish "+r+'has-post-thumbnail shipping-taxable purchasable product-type-simple"><a href="'+c+'" class="woocommerce-LoopProduct-link woocommerce-loop-product__link"><img width="315" height="315" src="'+e+'" class="attachment-woocommerce_thumbnail size-woocommerce_thumbnail" alt loading="lazy" /><h2 class="woocommerce-loop-product__title">'+l+'</h2><span class="price">'+s+"</span></a></li>"),u.isotope("insert",s),p.push(o),n++)})},error:function(e,t,o){console.log("ERROR : ",o),console.log("ERROR : ",$xhr),console.log("ERROR : ",t)}}).done(function(e){e.length&&(g=!0),console.log("done request")})):(console.log("wait. loading from rest"),setTimeout(function(){m(l)},200))}d("#search-icon").on("click",function(){d("body").toggleClass("active-search"),d("#search-overlay").fadeToggle(),d(".aws-search-field").focus(),d("#nav-toggle").toggleClass("active")}),d("#search-overlay").on("click",function(e){e.target==this&&(d("body").toggleClass("active-search"),d("#search-overlay").fadeToggle(),d("#nav-toggle").toggleClass("active"))}),d(document).keyup(function(e){27===e.keyCode&&d("#search-overlay").fadeOut(),d("body").toggleClass("active-search"),d("#nav-toggle").toggleClass("active")}),d(".search-results .woo-custom-filter, .search-results .load-more-wrapper").remove(),d(".woocommerce .wrapper select").length&&d("select").selectWoo(),d(".wpcf7 select").length&&d("select").selectWoo()});